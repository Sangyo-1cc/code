<!DOCTYPE html>
<html lang="ko">
<head>
    <base target="_top">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5382502021593566" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" integrity="sha512-BNaRQnYJYiPSqHHDb58B0yaPfCu+Wgds8Gp/gU33kqBtgNS4tSPHuGibyoeqMV/TJlSKda6FXzoEyYGjTe+vXA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>AI ìŠ¤ì¿¼íŠ¸ ì½”ì¹˜ ğŸ‹ï¸â€â™€ï¸</h1>
            <p class="subtitle">ë‹¹ì‹ ì˜ ìŠ¤ì¿¼íŠ¸ ìì„¸ë¥¼ ë¶„ì„í•˜ê³  ê¸°ë¡í•´ ë³´ì„¸ìš”</p>
        </header>
        <main>
            <section id="upload-section" class="card">
                <h3>1. ì˜ìƒ ì—…ë¡œë“œ</h3>
                <div class="controls">
                    <label for="videoUpload" class="file-label">ì—¬ê¸°ë¥¼ ëˆŒëŸ¬ ì˜ìƒ ì„ íƒ ğŸ“‚</label>
                    <input type="file" id="videoUpload" accept="video/*" style="display:none;">
                </div>
                <div id="initial-status" style="text-align:center; margin-top:20px;">AI ëª¨ë¸ì„ ë¡œë”© ì¤‘ì…ë‹ˆë‹¤...</div>
                <p class="privacy-note">**ê°œì¸ ì •ë³´ ë³´í˜¸:** ì—…ë¡œë“œí•˜ì‹  ì˜ìƒì€ ì‚¬ìš©ì ê¸°ê¸°ì—ì„œë§Œ ë¶„ì„ë˜ë©°, **ì–´ë– í•œ ì˜ìƒë„ ì„œë²„ì— ì €ì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.**</p>
            </section>

            <section id="analysis-section" class="card" style="display: none;">
                <h3>2. ì˜ìƒ í™•ì¸ ë° ë¶„ì„</h3>
                <div id="videoContainer">
                    <div id="video">
                        <video id="analysisVideo" style="display: none;" playsinline muted loop></video>
                        <canvas id="output_canvas"></canvas>
                    </div>
                </div>
                <div class="controls">
                    <button id="startAnalysisBtn" class="button-primary">ì´ ì˜ìƒìœ¼ë¡œ ë¶„ì„ ì‹œì‘í•˜ê¸° ğŸ”¬</button>
                </div>
                <!-- ì²« ë²ˆì§¸ ê´‘ê³  -->
                <div class="ad-container" style="margin-top: 20px;">
                    <ins class="adsbygoogle ad-unit-1"
                         style="display:block"
                         data-ad-client="ca-pub-5382502021593566"
                         data-ad-slot="8453146528"
                         data-ad-format="auto"
                         data-full-width-responsive="true"></ins>
                </div>
            </section>

            <section id="result-section" class="card" style="display: none;">
                <h3>3. ìµœì¢… ë¶„ì„ ê²°ê³¼ ğŸ†</h3>
                <div id="status" class="status-container"></div>
                
                <!-- ì½”ì¹˜ í”¼ë“œë°± ì˜ì—­ -->
                <div id="coach-feedback-area" style="margin: 20px 0;">
                    <h4>ğŸ’¬ AI ì½”ì¹˜ í”¼ë“œë°±</h4>
                    <ul id="feedbackList"></ul>
                </div>
                
                <div id="results-display-area">
                    <div id="story-canvas-container">
                        <canvas id="story-canvas" style="width:100%; border-radius: 8px;"></canvas>
                    </div>
                    <div id="no-squat-result-area" style="text-align: center; display: none;">
                        <p>ìŠ¤ì¿¼íŠ¸ ë™ì‘ì´ ê°ì§€ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ë‹¤ë¥¸ ì˜ìƒìœ¼ë¡œ ë‹¤ì‹œ ì‹œë„í•´ë³´ì„¸ìš”.</p>
                    </div>
                </div>
                
                <div class="result-actions" style="margin-top: 20px;">
                    <button id="shareStoryBtn" class="button-primary">ğŸ“¸ ê²°ê³¼ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ</button>
                    <button id="resetBtn" class="button-secondary">ìƒˆë¡œìš´ ì˜ìƒ ë¶„ì„í•˜ê¸° ğŸ”„</button>
                </div>
                
                <!-- ë‘ ë²ˆì§¸ ê´‘ê³  -->
                <div class="ad-container" style="margin-top: 20px;">
                    <ins class="adsbygoogle ad-unit-2"
                         style="display:block"
                         data-ad-client="ca-pub-5382502021593566"
                         data-ad-slot="1234567890"
                         data-ad-format="auto"
                         data-full-width-responsive="true"></ins>
                </div>
            </section>
        </main>
    </div>
    
    <!-- ê¸°ë³¸ ìŠ¤íƒ€ì¼ ì¶”ê°€ -->
    <style>
        .button-secondary {
            margin-top: 10px;
            background-color: #6c757d;
            color: white;
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
        }
        
        .button-secondary:hover {
            background-color: #5a6268;
        }
        
        #coach-feedback-area {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #007bff;
        }
        
        #feedbackList {
            list-style-type: none;
            padding: 0;
            margin: 10px 0 0 0;
        }
        
        #feedbackList li {
            padding: 8px 0;
            border-bottom: 1px solid #e9ecef;
        }
        
        #feedbackList li:last-child {
            border-bottom: none;
        }
        
        .ad-container {
            text-align: center;
            min-height: 100px;
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 10px;
        }
    </style>
    
    <!-- ì• ë“œì„¼ìŠ¤ ì´ˆê¸°í™” ìŠ¤í¬ë¦½íŠ¸ ê°œì„  -->
    <script>
        // í˜ì´ì§€ ë¡œë“œ í›„ ì• ë“œì„¼ìŠ¤ ì´ˆê¸°í™”
        window.addEventListener('load', function() {
            // ì•½ê°„ì˜ ì§€ì—° í›„ ì• ë“œì„¼ìŠ¤ ì´ˆê¸°í™”
            setTimeout(function() {
                try {
                    // ê° ê´‘ê³  ë‹¨ìœ„ë³„ë¡œ ê°œë³„ ì´ˆê¸°í™”
                    const adUnits = document.querySelectorAll('.adsbygoogle');
                    let initCount = 0;
                    
                    adUnits.forEach(function(adUnit, index) {
                        // ì´ë¯¸ ì´ˆê¸°í™”ëœ ê´‘ê³ ëŠ” ê±´ë„ˆë›°ê¸°
                        if (!adUnit.getAttribute('data-adsbygoogle-status')) {
                            setTimeout(function() {
                                try {
                                    (adsbygoogle = window.adsbygoogle || []).push({});
                                    initCount++;
                                    console.log(`AdSense unit ${index + 1} initialized`);
                                } catch (e) {
                                    console.log(`AdSense unit ${index + 1} initialization error:`, e);
                                }
                            }, index * 1000); // ê° ê´‘ê³ ë§ˆë‹¤ 1ì´ˆì”© ì§€ì—°
                        }
                    });
                    
                } catch (e) {
                    console.log('AdSense global initialization error:', e);
                }
            }, 2000); // í˜ì´ì§€ ë¡œë“œ í›„ 2ì´ˆ ì§€ì—°
        });
        
        // ë™ì  ê´‘ê³  ë¡œë”© í•¨ìˆ˜
        function loadAdsenseAd(container) {
            const adUnit = container.querySelector('.adsbygoogle');
            if (adUnit && !adUnit.getAttribute('data-adsbygoogle-status')) {
                try {
                    (adsbygoogle = window.adsbygoogle || []).push({});
                } catch (e) {
                    console.log('Dynamic AdSense loading error:', e);
                }
            }
        }
    </script>
    
    <script src="script.js" type="module"></script>
</body>
</html>
